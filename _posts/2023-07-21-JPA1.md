---
title: "[JPA] Intro"
toc: true
toc_sticky: true
categories: 
    - JPA
tags:
    - Spring
    - JPA
    - DB
typora-root-url: ../
---

본 포스트는 `Inflearn`의 김영한님 강의를 바탕으로 작성했습니다.

<br>



![img2](/assets/images/24_2.png){: width="70%"", height="40%""}



JPA에 대해서 한번 정리해보자!

본 포스팅은 Inflearn **김영한님**의 강의를 바탕으로 작성했다. 

(Spring 관련 포스팅은 전부 김영한님 강의를 바탕으로 작성됨.)

<br>

<br>





# *ORM*

`ORM` (Object-relational mapping)은 객체와 DB 테이블이 매핑을 이루는 것을 말한다. 즉 **객체가 테이블이 되도록 매핑 시켜주는 것** 을 의미한다.

객체와 관계형 데이터베이스 사이의 패러다임의 불일치를 해소해주고 객체는 객체대로 설계하고 관계형 데이터베이스는 관계형 데이터베이스대로 설계할 수 있게 도와준다.

<br>

<br>



# *JPA*

<br>



## 정의와 역할

그렇다면 JPA는 무엇인가? **JPA란 자바 ORM 기술에 대한 API 표준 명세**이다. JPA는 ORM을 사용하기 위한 `인터페이스` 를 모아둔 것이고, JPA를 사용하기 위해서 구현한 `Hibernate`, `DataNucleus` 같은 ORM 프레임워크를 사용해야 한다.



![img1](/assets/images/24_1.png){: width="70%"", height="40%""}

예를 들어서 `Item`이라는 테이블의 데이터를 얻어오기 위해서는 **SELECT * FROM Item** 이라는 query를 실행해야 하지만 ORM을 사용하면 **Item.findAll()** 이라는 메서드를 통해서 데이터를 가져올 수 있다. 

query를 직접 작성하지 않아도 돼서 생산성이 높아진다. 대신 복잡한 query를 ORM으로 표현하기는 한계가 있고 성능도 raw query에 비해서 떨어지는 단점이 있다.

<br>
<br>



# JPA는 어디서 동작할까?

![img3](/assets/images/24_3.png){: width="70%"", height="40%""}

애플리케이션에서 CRUD를 수행하면 JPA가 해당하는 SQL을 생성해주고 JDBC API를 사용해서 객체와 DB사이의 패러다임의 불일치를 해결해준다.

<br><br>



# JPA의 장점

* `객체 중심으로 개발`
  * 기존에는 SQL에 종속적인 개발을 했어야 했다. 그런데 JPA를 사용하면 객체 중심으로 개발을 할 수 있다.

* `유지보수`
  * 객체의 필드를 변경하면 개발자가 하나하나 해당 SQL을 수정했어야 했다. 그런데 이런 매핑과정을 JPA가 대신 해줌으로써 유지보수가 편리해졌다.

* `패러다임의 불일치 해결`
  * 기존에는 상속관계가 있는 객체를 DB에 넣을 때 굉장히 귀찮은 작업이 많았다. 그런데 JPA를 사용하면 알아서 필요한 SQL을 다 만들어서 넣어준다
  * 자유로운 객체 그래프 탐색이 가능해졌다.
* `성능`
  * 같은 트랜젝션 안에서 같은 엔티티를 반환한다. 이것이 가능한 이유는 조회를 한 후에 영속성 컨텍스트에 캐싱해두기 때문이다. DB에 query를 추가로 날리지 않기 때문에 약간의 성능 향상이 있다.
  * persist를 할때마다 DB에 쿼리를 날리지 않고 트랜젝션 커밋시점에 한번에 SQL을 날린다.
* `지연로딩`
  * 객체가 실제로 사용되는 시점에 로딩을 한다.
  * 사용되지 않는 것들은 프록시로 들고 있는다.
* `즉시로딩`
  * Join을 통해서 연관된 객체를 한번에 가져온다.
  * 항상 같이 사용되는 객체같은 경우는 `fetch join`을 통해서 한번에 조회하는 것이 성능상으로 좋다.

<br><br>



### 다음 포스팅부터는 JPA의 작동 원리와 사용 방법에 대해서 알아보겠다. :)

<br>







# 참고

* https://www.inflearn.com/course/ORM-JPA-Basic

* https://victorydntmd.tistory.com/195



